# テスト実行方法の修正計画

## 1. 現状の問題点

テスト実行時に多くのテストが失敗しています。主な原因として以下が考えられます：

1. テスト実行コマンドが適切でない
2. 新しく実装したコード(`config_loader.py`, `excel_processor.py`, `output_formatter.py`)とテストコードの間に不整合がある
3. テストコードが新しい実装に合わせて修正されていない

## 2. 調査結果

現在、テストの実行に問題があり、`uv run pytest ...`を使用すべきという指示がありました。これは環境変数やパスの設定などが適切に行われていない可能性を示唆しています。

## 3. 修正計画

### 3.1 テスト実行コマンドの修正

以下のコマンドを使用してテストを実行します：

```bash
uv run pytest test/test_config_loader.py test/test_excel_processor.py test/test_output_formatter.py test/test_cli_integration.py -v
```

### 3.2 テストコードの確認

新しく作成したテストファイル(`test_config_loader.py`, `test_excel_processor.py`, `test_output_formatter.py`, `test_cli_integration.py`)が正しく実装されているか確認します。

### 3.3 既存の`test_main.py`の調査

既存の`test_main.py`が新しい実装と互換性があるか確認し、必要に応じて修正します。

### 3.4 互換性レイヤーの検討

新旧の実装間で互換性を持たせるために必要な修正を行います。

## 4. 実行手順

1. 修正したテストコマンドを使用してテストを実行
2. エラーがあれば内容を分析
3. テストコードと実装コードの両方を必要に応じて修正
4. すべてのテストが成功するまで繰り返し

## 5. 確認項目

- 新しく実装した機能が正しくテストされているか
- 既存のテストとの互換性が保たれているか
- すべてのテストが成功して期待通りの動作をするか

この計画に基づき、テスト実行コマンドを修正してテストを実行し、問題を解決していきます。