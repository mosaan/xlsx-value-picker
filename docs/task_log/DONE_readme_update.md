# README.md更新計画

## 目的
現在のREADME.mdの内容が古くなっており、実装された機能や仕様と一致していません。本タスクでは、現在の実装状況に合わせて README.md を更新し、ユーザーが正確な情報を得られるようにすることを目的とします。

## 現状分析

### 現在の実装状況

以下のソースコードを分析した結果、現在の実装状況は以下の通りです：

1. **CLIインターフェース**:
   - コマンド名：`excel-validator`ではなく実装では`xlsx-value-picker`として動作
   - オプション：
     - `-c`, `--config`：設定ファイルを指定（デフォルトは`config.yaml`）
     - `--ignore-errors`：検証エラーが発生しても処理を継続するフラグ
     - `-o`, `--output`：出力先ファイルを指定
     - `--log`：検証エラーを記録するログファイルを指定
     # - `--schema`：JSONスキーマファイルのパスを指定 (削除)
     - `--include-empty-cells`：空セルも出力に含めるフラグ
     - `--validate-only`：バリデーションのみを実行するフラグ

2. **設定ファイル**:
   - `fields`: フィールド名とセル位置のマッピング
   - `rules`: バリデーションルールのリスト
   - `output`: 出力形式の設定
     - `format`: 出力形式（json, yaml, jinja2）
     - `template_file`/`template`: Jinja2テンプレート（format=jinja2の場合）

3. **バリデーション機能**:
   - ルール型：compare, required, regex_match, enum, all_of, any_of, not
   - フィールド間の関係検証
   - エラーメッセージのカスタマイズ

4. **出力機能**:
   - JSON形式
   - YAML形式
   - Jinja2テンプレート形式

### 現在のREADME.mdの問題点

1. コマンド名と引数が正確でない（`uv run python main.py`などの記述がある）
2. `--include-empty-range-row`というオプションの説明があるが実装では`--include-empty-cells`
3. バリデーション機能に関する説明が不足
4. 設定ファイルの例が古い（`excel_file`という項目があるが実装では使用されていない）
5. インストール方法が不十分
6. 複数の出力形式やテンプレート出力の説明が不足

## 更新計画

以下の順序でREADME.mdを更新します：

1. **概要セクション**:
   - ツールの説明を更新し、バリデーション機能も含める

2. **インストール方法**:
   - パッケージのインストール方法を明確に記述（uvとpipの両方）

3. **使い方**:
   - コマンド構文を修正
   - 正確なオプションとその説明を記載
   - 設定ファイルの書き方を詳細に説明
   - バリデーションルールの書き方と例を追加

4. **設定ファイル例**:
   - 最新の設定ファイルフォーマットに合わせた例を提供
   - フィールド定義、ルール定義、出力設定などを含む完全な例を追加

5. **バリデーション機能**:
   - 利用可能なバリデーションルール型の説明と例
   - エラーメッセージのカスタマイズ方法
   - バリデーション結果の確認方法

6. **出力機能**:
   - 各出力形式の詳細な説明と例
   - Jinja2テンプレートの使い方

7. **開発者向け情報**:
   - プロジェクト構造の説明
   - 依存関係管理方法
   - テスト実行方法

## 注意点

1. 実際のコマンド名とオプションを正確に反映させる
2. 実装されている機能のみを記述し、未実装の機能は予定として明示する
3. ユーザーにとって分かりやすい例と説明を心がける
4. 既存のREADME.mdの良い部分（例やサンプルデータの説明など）は残す

## 作業結果

README.mdを更新しました。主に以下の変更を行いました：

1. **概要の改善**: バリデーション機能についての説明を追加しました。
2. **インストール方法の明確化**: uvとpipを使った両方のインストール方法を明確に記述しました。
3. **コマンド構文とオプションの修正**: 実装と一致するように正確なコマンド構文とオプションに更新しました。
4. **バリデーション機能セクションの追加**: 単一フィールドの検証（required, compare, regex_match, enum）と複合ルール（all_of, any_of, not）の各種バリデーションルールの説明と例を追加しました。
5. **出力機能の詳細な説明**: 各種出力形式（JSON、YAML、Jinja2テンプレート）の説明と設定例を充実させました。
6. **設定ファイル例の更新**: 最新の設定ファイルフォーマットに合わせた完全な例を追加しました。
7. **コマンド実行例の追加**: 各種オプションを使用した実行例を追加しました。
8. **使用されなくなったフィールドの削除**: `excel_file`や`--include-empty-range-row`など、現在の実装では使用されていない項目を削除しました。

これにより、README.mdが最新の実装状況と一致し、ユーザーが正確な情報を得られるようになりました。