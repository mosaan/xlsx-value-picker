# コミュニケーションガイドライン

- あなたからの回答や文書作成、コードコメントの記載は日本語で行って下さい。
- 主要なドキュメントは本ワークスペース内の`/docs`ディレクトリに格納されています。タスクの実行前に適切と思われるファイルを参照してください。
  - 特に、`/docs/README.md`と`/docs/project-status.md`は現状の把握および参照すべき個別文書へのエントリポイントとして重要です。
- 以前からのタスクの継続でない限り、作業方針や手順を検討したうえで本ワークスペース内の`docs/task_log`ディレクトリ配下に新たな計画文書を作成してください。そして、その文書の内容をユーザに確認を求めたうえで、承認されてから作業を実行してください。以前からのタスクの継続の場合は、タスクの内容を確認したうえで、修正が必要な場合は既存のタスクの計画文書を更新するようにしてください。ただし、タスクを分割する必要がある場合は新規の計画文書を作成してかまいません。
  - このとき、ユーザは文書の内容を確認し、必要に応じてユーザ自身が作業方針や手順の修正を行うため、あなたは修正後の文書を再度確認する必要がある場合があります。
  - 文書化の際は、以下のルールに従ってください：
    - Markdown形式で記述してください。また、計画の作成日、及び最終更新日を文書の冒頭に必ず記載してください。
    - 計画の開始時点では計画中であることを示すため、ファイル名にプレフィックスとして`PLANNING_`を付けてください。計画が承認され、実行に移る際は、ファイル名のプレフィックスを`WIP_`に変更してください。計画された作業が完了したと判断した場合は、作業の完了の承認をユーザに求めてください。完了が承認された場合、作業結果をファイル内に追記したうえで、ファイル名のプレフィックスを`DONE_`に変更してください。
- 本プロジェクトに限らない一般的な知見が得られた場合・あるいは知見を明示的に記録するよう私から求められた場合、その知見は私の個人的な知識リポジトリであるObsidianにMarkdown形式で記録してください。記録先は基本的にはObsidianの日誌ディレクトリ(`/journals`)の本日の日誌ファイル(`YYYY_MM_DD.md`)としますが、知見が長い文章（概ね3段落以上や3見出し以上）になる場合は、個別ページディレクトリ(`/pages`)に新たなページを作成したうえで、本日の日誌からWikiリンク形式でリンクしてください。
- わからないことがあればユーザに質問してください。ただし、ライブラリの使用方法など技術的な情報については先にWEBから調査(`brave_web_search`ツールを使用)し、得られた検索結果からさらに情報を洗練するためのクエリを検討したうえで改めて調査してください。それでも解決しない場合にユーザに質問してください。
- コードの修正や追加を行う場合は、必ずテストを実行し、すべてのテストが成功することを確認してください。


# Pythonパッケージマネージャー「uv」の使用方法

## 基本情報
- uvはRustで実装された高速なPythonパッケージ・プロジェクト管理ツールです
- 従来のpip、pip-tools、pipx、poetry、pyenv、virtualenvなどの代替として機能します
- 公式ドキュメント: https://docs.astral.sh/uv/
- GitHub: https://github.com/astral-sh/uv

## 主要コマンド

### パッケージ管理
- `uv add <パッケージ名>` - パッケージをインストール（開発用は `--dev` オプション付き）
- `uv remove <パッケージ名>` - パッケージを削除
- `uv sync [--all-extras]` - pyproject.tomlに基づいて環境を同期し、uv.lockを更新
- `uv pip install <パッケージ名>` - pipと同様のインターフェースでパッケージをインストール

### 環境管理
- `uv venv <仮想環境名>` - 新しい仮想環境を作成
- `uv python -m <モジュール>` - 特定のPythonモジュールを実行
- `uv run <スクリプト>` - スクリプトを実行（必要な依存関係を自動インストール）

### プロジェクト管理
- `uv init [プロジェクト名]` - 新しいプロジェクトを作成
- `uv lock` - ロックファイル（uv.lock）を更新
- `uv export` - 他のフォーマット（requirements.txtなど）にロックファイルをエクスポート
- `uv tree` - プロジェクトの依存関係ツリーを表示

## 依存関係の管理の特徴
- pyproject.tomlファイルで依存関係を宣言（PEP 621準拠）
- uv.lockファイルで依存関係のバージョンを厳密に固定
- 依存関係グループの概念（[dependency-groups]セクション）をサポート
- 開発用依存関係は `--dev` オプションで管理

## ベストプラクティス
- 依存関係を追加/削除する際は直接pyproject.tomlを編集せず、uvコマンドを使用する
- 環境を同期する際は `uv sync --all-extras` を使用して全ての依存関係を更新
- CI/CD環境ではuv.lockファイルを活用して再現可能なビルドを実現
- Pythonバージョン管理には `.python-version` ファイルを使用可能

## エラー対応
- ロックファイルの競合: `uv lock --refresh` で強制的に再生成
- パッケージのインストール失敗: `uv pip install --no-deps <パッケージ名>` で依存関係なしでインストール
- 環境の破損: `uv venv --recreate` で仮想環境を再作成