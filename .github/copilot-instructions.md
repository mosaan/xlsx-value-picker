# コミュニケーションガイドライン

- 回答、文書作成、コードコメントは日本語で行ってください。
- タスク実行前に`/docs`ディレクトリの関連文書（特に`/docs/README.md`と`/docs/project-status.md`）を参照してください。
- 新規タスクの場合は`docs/task_log`に計画文書を作成し、ユーザの承認を得てから実行してください。継続タスクの場合は既存文書の更新か、必要に応じて新規文書を作成してください。
  - 文書作成ルール：
    - Markdown形式で記述し、作成日と最終更新日を冒頭に記載
    - 計画段階は`PLANNING_`、実行中は`WIP_`、完了後は`DONE_`のプレフィックスをファイル名に付与
- 一般的な知見や記録要求があれば、Obsidianの日誌（`/journals/YYYY_MM_DD.md`）に記録してください。長文の場合は個別ページ（`/pages/`）に作成し、日誌からリンクしてください。
- 不明点はユーザに質問してください。ただし技術情報は先に`brave_web_search`で調査し、それでも解決しない場合に質問してください。
- コード修正時は必ずテストを実行し、全テストの成功を確認してください。


# Pythonパッケージマネージャー「uv」の使用方法

## 基本情報
- uvはRustで実装された高速なPythonパッケージ・プロジェクト管理ツールです
- 従来のpip、pip-tools、pipx、poetry、pyenv、virtualenvなどの代替として機能します
- 公式ドキュメント: https://docs.astral.sh/uv/
- GitHub: https://github.com/astral-sh/uv

## 主要コマンド

### パッケージ管理
- `uv add <パッケージ名>` - パッケージをインストール（開発用は `--dev` オプション付き）
- `uv remove <パッケージ名>` - パッケージを削除
- `uv sync [--all-extras]` - pyproject.tomlに基づいて環境を同期し、uv.lockを更新
- `uv pip install <パッケージ名>` - pipと同様のインターフェースでパッケージをインストール

### 環境管理
- `uv venv <仮想環境名>` - 新しい仮想環境を作成
- `uv python -m <モジュール>` - 特定のPythonモジュールを実行
- `uv run <スクリプト>` - スクリプトを実行（必要な依存関係を自動インストール）

### プロジェクト管理
- `uv init [プロジェクト名]` - 新しいプロジェクトを作成
- `uv lock` - ロックファイル（uv.lock）を更新
- `uv export` - 他のフォーマット（requirements.txtなど）にロックファイルをエクスポート
- `uv tree` - プロジェクトの依存関係ツリーを表示

## 依存関係の管理の特徴
- pyproject.tomlファイルで依存関係を宣言（PEP 621準拠）
- uv.lockファイルで依存関係のバージョンを厳密に固定
- 依存関係グループの概念（[dependency-groups]セクション）をサポート
- 開発用依存関係は `--dev` オプションで管理

## ベストプラクティス
- 依存関係を追加/削除する際は直接pyproject.tomlを編集せず、uvコマンドを使用する
- 環境を同期する際は `uv sync --all-extras` を使用して全ての依存関係を更新
- CI/CD環境ではuv.lockファイルを活用して再現可能なビルドを実現
- Pythonバージョン管理には `.python-version` ファイルを使用可能

## エラー対応
- ロックファイルの競合: `uv lock --refresh` で強制的に再生成
- パッケージのインストール失敗: `uv pip install --no-deps <パッケージ名>` で依存関係なしでインストール
- 環境の破損: `uv venv --recreate` で仮想環境を再作成